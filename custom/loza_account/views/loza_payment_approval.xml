<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <record id="loza_payment_approval_tree_view" model="ir.ui.view">
        <field name="name">loza.payment.approval.tree.view</field>
        <field name="model">loza.payment.approval</field>
        <field name="arch" type="xml">
            <!--
                <search string="Search Saraf Documents">
                    <field name="saraf_id"/>
                    <field name="partner_id"/>
                    <field name="state"/>
                    <field name="payment_date"/>

                    <filter domain="[('saraf_type', '=', 'cash')]" name="wire" help="Cash Transactions"/>
                    <filter domain="[('saraf_type', '=', 'check')]" name="wire" help="Check Transactions"/>
                    <filter domain="[('saraf_type', '=', 'wire')]" name="wire" help="Wire Transactions"/>
                    <separator/>
                    <filter name="draft" string="Draft" domain="[('state','=','draft')]"/>
                    <filter name="posted" string="Posted" domain="[('state', '=', 'ready')]"/>
                    <filter name="cancel" string="Cancelled" domain="[('state', '=', 'cancelled')]"/>
                    <filter name="audited" string="Audited" domain="[('state', '=', 'audited')]"/>
                    <filter name="done" string="Done" domain="[('state', '=', 'done')]"/>
                    <group expand="0" string="Group By">
                        <filter string="Vendor Name" name="vendorname" context="{'group_by':'partner_id'}"/>
                        <filter name="status" string="Status" context="{'group_by':'state'}"/>
                        <separator/>
                        <filter name="Createdby" string="Created By" context="{'group_by':'created_by'}"/>
                    </group>
               </search> -->
            <tree string="أذونات الصرف">
                <field name="saraf_id"/>
                <field name="amount"/>
                <field name="payment_date"/>
                <field name="saraf_type"/>
                <field name="state"/>
                <field name="currency_id" invisible="1"/>
            </tree>
        </field>
    </record>


    <record id="loza_payment_approval_form_view" model="ir.ui.view">
        <field name="name">loza.payment.approval.form.view</field>
        <field name="model">loza.payment.approval</field>
        <field name="arch" type="xml">
            <form string="أذن الصرف">
                <header>
                    <button name="action_confirm_saraf" string="Confirm Payment" type="object"
                            class="oe_highlight" states="draft" groups="loza_account.group_loza_account_payment"/>
                    <button name="action_confirm_audit" string="Audit Approval" type="object"
                            class="oe_highlight" states="ready" groups="loza_account.group_loza_account_auditor"/>
                    <button name="action_do_return" string="Disapprove" type="object"
                            class="oe_highlight" states="ready" groups="loza_account.group_loza_account_auditor"/>

                    <button name="action_confirm_cfo" string="Approve" type="object"
                            class="oe_highlight" states="audited" groups="loza_account.group_loza_account_cfo"/>
                    <button name="action_cancelled" string="Cancel" type="object"
                            class="oe_highlight" states="audited,cfo_approved" groups="loza_account.group_loza_account_cfo"/>


<!--                    <button name="action_confirm_hof" string="Approve" type="object"-->
<!--                            class="oe_highlight" states="cfo_approved" groups="loza_account.group_loza_account_hof"/>-->
<!--                    <button name="action_confirm_chairman" string="Approve" type="object"-->
<!--                            class="oe_highlight" states="hof_approved" groups="loza_account.group_loza_account_chairman"/>-->
                    <button name="action_confirm_cash_registrar" string="Accounts" type="object"
                            class="oe_highlight" states="cfo_approved" groups="loza_account.group_loza_account_cash"/>
                    <button name="action_confirm_post_accounts" string="Post" type="object"
                            class="oe_highlight" states="accounts" groups="loza_account.group_loza_account_accounts"/>

                    <field name="state" widget="statusbar"
                           statusbar_visible="draft,ready,audited,cfo_approved,hoc_approved,accounts,done,cancelled" readonly="1"/>

                </header>
                <sheet>
                    <div class="oe_left" style="width: 500px;">
                        <div class="oe_title" style="width: 390px;">
                            <label class="oe_edit_only" for="saraf_id"
                                   string="Saraf #"/>
                            <h1>
                                <field name="saraf_id" class="oe_inline"/>
                            </h1>
                        </div>
                    </div>
                    <group cols="">
                    <group name="Payment Information">
                        <field name="saraf_type"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>

                        <field name="wire_type" attrs="{'invisible': ['|', ('saraf_type', '=', 'cash'),('saraf_type', '=', 'check')], 'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="partner_type"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                        <field name="payment_date"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                        <field name="employee_id"
                               attrs="{'invisible': ['|', ('partner_type', '=', 'customer'),('partner_type', '=', 'vendor')], 'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="bank_account" attrs="{'invisible': ['|', ('saraf_type', '=', 'cash'),('saraf_type', '=', 'wire')], 'readonly': [('state', '!=', 'draft')]}"/>
                            <field name="bank_name" attrs="{'invisible': ['|', ('saraf_type', '=', 'cash'),('saraf_type', '=', 'wire')], 'readonly': [('state', '!=', 'draft')]}"/>
                        <field name="partner_id"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>

                    </group>
                    <group string="Transaction Details">
                        <field name="amount"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                        <field name="total_string" readonly="1"/>
                        <field name="currency_id" invisible="1"/>
                        <field name="payment_id"
                               attrs="{'invisible': [('state', '!=', 'done')], 'readonly': [('state', '!=', 'draft')]}"/>
                    </group>
                    <group string="Items" colspan="2" attrs="{'invisible': ['|' , ('saraf_type', '=', 'check'),('saraf_type', '=', 'wire')]}">
                        <field name="transaction_ids"/>
<!--                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>-->
                    </group>
                    <group string="Items" colspan="2" attrs="{'invisible': ['|', ('saraf_type','=','check'), ('saraf_type','=','cash')]}">
                        <field name="wire_ids"/>
<!--                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>-->
                    </group>
                    <group string="Items" colspan="2" attrs="{'invisible': ['|' , ('saraf_type', '=', 'cash'),('saraf_type', '=', 'wire')]}">
                        <field name="check_ids"/>
<!--                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>-->
                    </group>
                    <group string="Attachments" colspan="2">
                        <field name="attachment_ids"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                    </group>
                    <group string="Accounting Information">
                        <field name="saraf_category"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                        <field name="department_id"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                    </group>
                    <group string="Recepient Details">
                        <field name="recepient_id"/>
                        <field name="recepient_id_no"/>
                    </group>
                    <group string="Responsible Employees">
                        <field name="prepare_id"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                        <field name="auditor_id"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                        <field name="cfo_id"
                               attrs="{'readonly': [('state', '!=', 'draft'),]}"/>
                        <field name="safecarer_id"  attrs="{'invisible': ['|', ('saraf_type','=','check'), ('saraf_type','=','wire')], 'readonly': [('state', '!=', 'draft')]}"/>
                    </group>
                    </group>
                </sheet>
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_follower"/>
                    <field name="message_ids" widget="mail_thread" options="{'post_refresh': 'recipients'}"/>
                </div>
            </form>
        </field>
    </record>
</odoo>